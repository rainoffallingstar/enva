---
description:项目初始化 (Plan 模式专用)
---
# 项目初始化 (Plan 模式专用)

> **本命令仅生成规划，不执行任何文件操作**

## Step 1: 目录结构规划

**计划创建以下目录结构：**

```         
project/
├── docs/
│   ├── requirements.md    # 需求文档
│   ├── architecture.md    # 架构设计
│   └── schema.sql         # 数据库DDL
└── src/
    └── types/             # 类型定义
```

**执行命令预览：**

``` bash
mkdir -p docs src/types
```

------------------------------------------------------------------------

## Step 2: 用户需求确定

首先，请询问用户的具体想法和需求：

> ⏸️ **检查点：暂停，等待用户回答再继续**

扮演一位极度苛刻的高级系统架构师和产品总监，执行以下步骤：

0. 如果用户的需求是针对现有代码进行迁移或重构，你需要先探索当前代码的状况和功能，然后进行其他部分的执行。

1.  **逻辑漏洞扫描**：无情地指出用户需求中逻辑不通、状态缺失（如：失败了怎么办？网断了怎么办？）、权限定义模糊的地方。

2.  **数据流拷问**：针对核心功能，质问用户数据是如何流转的。例如：'用户下单时，库存是预扣还是支付成功后扣？数据一致性怎么保证？'

3.  **生成问卷**：基于以上分析，生成一份《深度需求调研表》。问题必须具体，且给出
    A/B 选项供用户选择。

4.  **技术栈确认**：询问用户希望使用的代码语言和框架偏好。用户可能更喜欢rust、go、python和R

> ⏸️ **检查点：输出问卷后暂停，等待用户回答再继续**

------------------------------------------------------------------------

## Step 3: 需求文档规划

用户回答问卷后，规划生成 `docs/requirements.md`：

``` markdown
# 需求文档

## 项目概述
[根据用户回答填写]

## 功能需求
[根据用户回答填写]

## 非功能需求
[根据用户回答填写]

## 约束与假设
[根据用户回答填写]
```

------------------------------------------------------------------------

## Step 4: 架构设计规划

规划生成 `docs/architecture.md`，必须包含以下章节：

### 4.1 技术栈选型

| 层级             | 技术选择 | 理由   |
|------------------|----------|--------|
| Frontend         | [待定]   | [待定] |
| Backend          | [待定]   | [待定] |
| Database         | [待定]   | [待定] |
| State Management | [待定]   | [待定] |

### 4.2 目录结构

细化到文件层级的完整项目结构。

### 4.3 核心数据流

使用 Mermaid Sequence Diagram 画出核心业务数据流向：

``` mermaid
sequenceDiagram
    participant U as 用户
    participant F as 前端
    participant B as 后端
    participant D as 数据库
    Note over U,D: [根据业务填写]
```

明确定义模块间交互格式：

```         
模块A -> 模块B: { field1, field2, field3 }
```

### 4.4 数据库设计

同步规划 `docs/schema.sql`，包含完整 DDL。

### 4.5 全局类型规划

规划 `src/types/` 下的关键 Interface： - `User` - `ApiResponse<T>` -
`[业务相关类型]`

------------------------------------------------------------------------

## Step 5: TODO 列表规划

计划使用 `todowrite` 创建以下任务：

```         
[P1] 完成需求文档 (docs/requirements.md)
[P1] 完成架构设计 (docs/architecture.md)
[P1] 完成数据库设计 (docs/schema.sql)
[P2] 定义核心类型 (src/types/index.ts)
```

------------------------------------------------------------------------

## Step 6: 规划输出确认

完成规划后，输出以下摘要：

```         
📋 初始化规划完成

📁 待创建目录：
   - docs/
   - src/types/

📄 待创建文件：
   - docs/requirements.md
   - docs/architecture.md
   - docs/schema.sql

📝 待创建 TODO：
   - [P1] 完成需求文档
   - [P1] 完成架构设计
   - [P1] 完成数据库设计
   - [P2] 定义核心类型


```

⏭️ 用户确认后可切换至 Act 模式执行

------------------------------------------------------------------------

## 执行流程

1.  输出目录结构规划
2.  生成《深度需求调研表》并暂停
3.  等待用户回答问卷
4.  根据回答规划各文档内容
5.  输出完整规划摘要
6.  等待用户确认或切换模式
